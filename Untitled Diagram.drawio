<mxfile host="app.diagrams.net" modified="2022-05-25T20:01:58.032Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36 Edg/101.0.1210.53" etag="9UrmPo-2m3RM08t7GgIq" version="18.1.2" type="github">
  <diagram id="CeN3dQLY-kd0Jw_Bi_ws" name="Page-1">
    <mxGraphModel dx="2048" dy="681" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-29" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=11;fontColor=#232F3E;" parent="1" source="Wa7LFaG9Wdek9uohSkZD-1" target="Wa7LFaG9Wdek9uohSkZD-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-1" value="Amazon S3" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#232F3E;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.s3;" parent="1" vertex="1">
          <mxGeometry x="360" y="200" width="80" height="100" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Helvetica;fontSize=11;fontColor=#232F3E;" parent="1" source="Wa7LFaG9Wdek9uohSkZD-2" target="Wa7LFaG9Wdek9uohSkZD-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-2" value="AWS Lambda" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#232F3E;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.lambda;" parent="1" vertex="1">
          <mxGeometry x="360" y="40" width="80" height="100" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-3" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#4D27AA;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.glue_crawlers;" parent="1" vertex="1">
          <mxGeometry x="570" y="960" width="78" height="78" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-4" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#4D27AA;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.glue_data_catalog;" parent="1" vertex="1">
          <mxGeometry x="345" y="960" width="72" height="78" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-5" value="Amazon RDS" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#232F3E;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.rds;" parent="1" vertex="1">
          <mxGeometry x="160" y="940" width="80" height="100" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=16;fontColor=#232F3E;" parent="1" source="Wa7LFaG9Wdek9uohSkZD-12" target="Wa7LFaG9Wdek9uohSkZD-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="300" y="90" />
              <mxPoint x="300" y="90" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-12" value="Client&#39;s&lt;br&gt;SFTP Server" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#232F3E;fillColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.traditional_server;fontFamily=Verdana;" parent="1" vertex="1">
          <mxGeometry x="190" y="40" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-20" value="JavaScript function which has credentials for sftp server will fetch specified files and dump in AWS S3 bucket&amp;nbsp;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Verdana;fontSize=11;fontColor=#232F3E;" parent="1" vertex="1">
          <mxGeometry x="460" y="40" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-21" value="sftp.datadesign.io" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontFamily=Verdana;fontColor=#232F3E;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="340" y="180" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-25" value="data-designs-beta-sftp-s3" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontFamily=Verdana;fontColor=#232F3E;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="320" y="20" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-26" value="Lambda function will dump the &quot;ZIP&quot; file in bucket&#39;s particular site folder&amp;nbsp;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Verdana;fontSize=11;fontColor=#232F3E;" parent="1" vertex="1">
          <mxGeometry x="455" y="200" width="205" height="80" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-36" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=10;fontColor=#232F3E;" parent="1" source="Wa7LFaG9Wdek9uohSkZD-27" target="Wa7LFaG9Wdek9uohSkZD-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-27" value="AWS Lambda" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#232F3E;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.lambda;" parent="1" vertex="1">
          <mxGeometry x="360" y="380" width="80" height="100" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-28" value="csv_preprocessor" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontFamily=Verdana;fontColor=#232F3E;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="345" y="360" width="110" height="20" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-33" value="When &quot;ZIP&quot; file gets dropped in s3 bucket this lambda function will extract CSV files from the ZIP file and put the CSV files in another s3 bucket and delete the zip file&amp;nbsp;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Verdana;fontSize=11;fontColor=#232F3E;" parent="1" vertex="1">
          <mxGeometry x="460" y="390" width="200" height="78" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-45" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=10;fontColor=#232F3E;" parent="1" source="Wa7LFaG9Wdek9uohSkZD-34" target="Wa7LFaG9Wdek9uohSkZD-38" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-34" value="Amazon S3" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#232F3E;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.s3;" parent="1" vertex="1">
          <mxGeometry x="360" y="560" width="80" height="100" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-35" value="datadesign-stagging" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontFamily=Verdana;fontColor=#232F3E;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="335" y="540" width="130" height="20" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-37" value="This bucket also has various site folders which has all the unprocessed CSVs which was extracted from the ZIP file" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Verdana;fontSize=11;fontColor=#232F3E;" parent="1" vertex="1">
          <mxGeometry x="460" y="560" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-40" value="csv_preprocessor_stage2" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontFamily=Verdana;fontColor=#232F3E;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="160" y="540" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-43" value="This function triggers whenever csv files get dropped in the datadesign-stagging bucket, it will encode the files in proper ASCI format and check the columns with the help &quot;columncheck.json&quot; file which is present in datadesign-lambda-zip bucket" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Verdana;fontSize=11;fontColor=#232F3E;" parent="1" vertex="1">
          <mxGeometry x="-160" y="560" width="340" height="80" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-38" value="AWS Lambda" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#232F3E;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.lambda;" parent="1" vertex="1">
          <mxGeometry x="200" y="560" width="80" height="100" as="geometry" />
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-46" value="" style="endArrow=classic;html=1;rounded=0;fontFamily=Verdana;fontSize=11;fontColor=#232F3E;exitX=0.486;exitY=-0.191;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="Wa7LFaG9Wdek9uohSkZD-40" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="150" y="370" as="sourcePoint" />
            <mxPoint x="350" y="240" as="targetPoint" />
            <Array as="points">
              <mxPoint x="240" y="240" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Wa7LFaG9Wdek9uohSkZD-47" value="After Processing that CSV file, lambda function put the file in&amp;nbsp;&lt;br&gt;sftp.datadesign.io bucket&#39;s&lt;br&gt;particular site&#39;s source folder,&lt;br&gt;now this bucket contain all the processed csv files&amp;nbsp;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Verdana;fontSize=11;fontColor=#232F3E;" parent="1" vertex="1">
          <mxGeometry x="30" y="370" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="Z0V9WUZh1JCLHmLJx5fJ-1" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#FF4F8B;gradientDirection=north;fillColor=#BC1356;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.eventbridge;fontFamily=Verdana;" vertex="1" parent="1">
          <mxGeometry x="880" y="282" width="78" height="78" as="geometry" />
        </mxCell>
        <mxCell id="Z0V9WUZh1JCLHmLJx5fJ-2" value="&lt;span style=&quot;color: rgb(35, 47, 62); font-family: Helvetica; font-size: 10px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 700; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 249, 250); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;&quot;&gt;EventBridge&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;fontSize=11;fontFamily=Verdana;fontColor=#232F3E;align=center;" vertex="1" parent="1">
          <mxGeometry x="880" y="360" width="80" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
